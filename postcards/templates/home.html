{% extends "base.html" %}

{% block content %}
<p><a href="{{ url_for('.new_postcard_form') }}">add new postcard</a></p>

<table>
<thead>
<tr>
    <th>delete</th>
    <th>publish</th>
    <th>country</th>
    <th>date</th>
    <th>sender</th>
    <th>front</th>
    <th>back</th>
    <th>tags</th>
</tr>
</thead>
<tbody>
{% for postcard in postcards: %}
<tr>
    {% if postcard.published and postcard.submission: %}
    <td class="status-published" colspan="2"><a href="http://www.reddit.com{{ postcard.submission }}">Published</a></td>
    {% elif postcard.published: %}
    <td class="status-published" colspan="2">Publishing&hellip;</td>
    {% else: %}
    <td>
        <form method="POST" action="{{ url_for('.delete') }}">
            <input type="hidden" name="postcard-id" value="{{ postcard.id }}">
            <input type="submit" value="delete">
        </form>
    </td>
    <td>
        <form method="POST" action="{{ url_for('.publish') }}">
            <input type="hidden" name="postcard-id" value="{{ postcard.id }}">
            <input type="submit" value="publish">
        </form>
    </td>
    {% endif %}
    <td>{{ postcard.country }}</td>
    <td>{{ postcard.date.strftime('%Y-%m-%d') }}</td>
    <td><a href="http://www.reddit.com/user/{{ postcard.user }}">{{ postcard.user }}</a></td>
    {% if postcard.front %}
    <td><a class="thumbnail" href="{{ url_base }}{{ postcard.front }}"><img src="{{ url_base }}{{ postcard.front_thumb or DEFAULT_THUMB }}"></a></td>
    {% else %}
    <td></td>
    {% endif %}
    {% if postcard.back %}
    <td><a class="thumbnail" href="{{ url_base }}{{ postcard.back }}"><img src="{{ url_base }}{{ postcard.back_thumb or DEFAULT_THUMB }}"></a></td>
    {% else %}
    <td></td>
    {% endif %}
    <td>{{ ', '.join(postcard._tags) }}</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}
